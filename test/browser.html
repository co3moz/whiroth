<!--suppress HtmlFormInputWithoutLabel, JSUnusedAssignment, JSCheckFunctionSignatures -->
<textarea id="inputTextArea" style="width: 48%; height: 100%">
    5 (10 pc)
    "Hello World!" (pc) 10 pc
    "This is an awesome language (nope) whiroth" (pc) 10 pc
    "Type and execute it" (pc) 10 pc
    5 (10 pc)
</textarea>

<textarea id="outputTextArea" style="width: 48%; height: 100%">

</textarea>

<script src="../whiroth.js"></script>

<script>
    var inputTextArea = document.getElementById("inputTextArea");
    var outputTextArea = document.getElementById("outputTextArea");

    inputTextArea.onkeyup = function () {
        try {
            var compiled = whiroth(inputTextArea.value);
            try {
                var executed = compiled.fn();

                outputTextArea.value = 'result: ' + executed;
                outputTextArea.value += '\nout: ' + executed.out;
                outputTextArea.value += '\nstack: ' + executed.stack;
                outputTextArea.value += '\nexecution time: ' + executed.executionTime;
                outputTextArea.value += '\ncompile time: ' + compiled.compileTime;
                outputTextArea.value += '\npure fn: ' + compiled.fnPure;
            } catch(e) {
                outputTextArea.value = 'Execution error! :' + e.message;
                outputTextArea.value += '\ncompile time: ' + compiled.compileTime;
                outputTextArea.value += '\npure fn: ' + compiled.fnPure;
            }
        } catch (e) {
            outputTextArea.value = e.message;
        }
    };

    inputTextArea.onkeyup(); // trigger for start
</script>